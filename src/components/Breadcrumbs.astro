---
interface BreadcrumbItem {
  label: string;
  url?: string;
}

interface Props {
  items: BreadcrumbItem[];
}

const { items } = Astro.props;

// Generate BreadcrumbList schema
const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": items.map((item, index) => ({
    "@type": "ListItem",
    "position": index + 1,
    "name": item.label,
    ...(item.url && { "item": `${Astro.site}${item.url.replace(/^\//, '')}` })
  }))
};
---

<!-- Breadcrumb Schema -->
<script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />

<!-- Breadcrumb Navigation -->
<nav aria-label="Breadcrumb" class="bg-gray-800 py-3 px-4 border-b border-gray-700">
  <div class="max-w-6xl mx-auto">
    <ol class="flex flex-wrap items-center gap-2 text-sm">
      {items.map((item, index) => (
        <li class="flex items-center gap-2">
          {index > 0 && (
            <span class="text-gray-500" aria-hidden="true">/</span>
          )}
          {item.url ? (
            <a 
              href={item.url} 
              class="text-brand-yellow hover:underline transition"
            >
              {item.label}
            </a>
          ) : (
            <span class="text-gray-300">
              {item.label}
            </span>
          )}
        </li>
      ))}
    </ol>
  </div>
</nav>
